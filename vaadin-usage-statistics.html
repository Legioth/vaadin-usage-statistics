<script>
// Wait until the application has been running for a while to see which elements are used

var getUsedVaadinElements = function() {
  const elementClasses = Object.keys(window.Vaadin).map(c => window.Vaadin[c]).filter(c=>c.is);
  var elementVersionMap = {};
  elementClasses.forEach(cls => {
    elementVersionMap[cls.is] = cls.version ? cls.version : "0.0.0";
  });
  return elementVersionMap;
}

const delay = 3000; // Should be 15 min or so
const url = "https://tools.vaadin.com/";

setTimeout(() => {
  const elements = getUsedVaadinElements();
  console.log("Sending "+JSON.stringify(elements)+" to " + url);
}, delay);
</script>
